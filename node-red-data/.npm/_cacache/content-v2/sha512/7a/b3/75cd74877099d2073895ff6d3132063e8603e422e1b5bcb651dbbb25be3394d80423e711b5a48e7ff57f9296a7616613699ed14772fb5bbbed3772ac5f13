{"_id":"node-red-contrib-postgres-multi","_rev":"3-6224c0dcca76cbaa23fbb800a197235a","name":"node-red-contrib-postgres-multi","dist-tags":{"latest":"0.2.0"},"versions":{"0.1.0":{"name":"node-red-contrib-postgres-multi","version":"0.1.0","description":"A Node-RED node to query PostgreSql, with multi-query support","dependencies":{"pg":"~7.4.1","node-postgres-named":"^2.4.1","querystring":"^0.2.0"},"engines":{"node":">=8"},"repository":{"type":"git","url":"git+https://github.com/BruceFletcher/node-red-contrib-postgres-multi.git"},"license":"Apache-2.0","keywords":["node-red","postgres","postgresql"],"node-red":{"nodes":{"PostgreSql":"postgres.js"}},"gitHead":"35a3a2765ec5d775547b346b3283d12b26daad52","bugs":{"url":"https://github.com/BruceFletcher/node-red-contrib-postgres-multi/issues"},"homepage":"https://github.com/BruceFletcher/node-red-contrib-postgres-multi#readme","_id":"node-red-contrib-postgres-multi@0.1.0","_npmVersion":"5.7.1","_nodeVersion":"8.10.0","_npmUser":{"name":"brucef","email":"befletch@gmail.com"},"dist":{"integrity":"sha512-qADhpqP7izByeKSKc7Xm+7hTiDjjylk4EpTZDLea2W66i4zKT54gcoZDqqHypyeAAC+305NjD6CgJyq2xbjOCw==","shasum":"d96f514817a6409a1cc59d41d0612b721b026008","tarball":"https://registry.npmjs.org/node-red-contrib-postgres-multi/-/node-red-contrib-postgres-multi-0.1.0.tgz","fileCount":6,"unpackedSize":28705,"signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIFp5t46ZxHdM/oW4xNuy08ZzkSi114dkAS/ms8OIy9D/AiEA6SIJHvxab/nr4UddiXx9jgOlrYw5Bdu2L+mYZiplkLY="}]},"maintainers":[{"name":"brucef","email":"befletch@gmail.com"}],"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/node-red-contrib-postgres-multi_0.1.0_1521557821727_0.40731790815633717"},"_hasShrinkwrap":false},"0.2.0":{"name":"node-red-contrib-postgres-multi","version":"0.2.0","description":"A Node-RED node to query PostgreSql, with multi-query support","dependencies":{"pg":"~7.4.1","node-postgres-named":"^2.4.1","querystring":"^0.2.0"},"engines":{"node":">=8"},"repository":{"type":"git","url":"git+https://github.com/BruceFletcher/node-red-contrib-postgres-multi.git"},"license":"Apache-2.0","keywords":["node-red","postgres","postgresql"],"node-red":{"nodes":{"PostgreSql":"postgres.js"}},"gitHead":"ba6368b213e0186f4be431f65b4faca4c8e56243","bugs":{"url":"https://github.com/BruceFletcher/node-red-contrib-postgres-multi/issues"},"homepage":"https://github.com/BruceFletcher/node-red-contrib-postgres-multi#readme","_id":"node-red-contrib-postgres-multi@0.2.0","_npmVersion":"6.1.0","_nodeVersion":"8.11.3","_npmUser":{"name":"brucef","email":"befletch@gmail.com"},"dist":{"integrity":"sha512-Ut/HhSKmgfWIrLEL5vieY9wkOqQY/Agcc1by48UimxpmotSC82zGgsRPn3R2LUOZHiHQYTsSBbO3Ili99L1Qsg==","shasum":"90dabee7a0474ea8b8afd865ce8fcc01267e1391","tarball":"https://registry.npmjs.org/node-red-contrib-postgres-multi/-/node-red-contrib-postgres-multi-0.2.0.tgz","fileCount":6,"unpackedSize":29912,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJbSCZ6CRA9TVsSAnZWagAAFRQP/3O0LW0+MgsW5wq6dmC2\nho0IA+OtiRhaNpLLnJ6/IrkiUAhhiFUy8I1iT6rGRCXy0X7QCpW8KfHTgvr2\nmmCDev7mOkhLcVmu3enQFbAgOdOGE8NBaYawWHTkBAivXcNH1PefLrGX9V0d\nseb+Q6UKrBqY90sWL7+jZUUh70vcnhjX1eidylX9pb/ArGoEsef58V47RRI5\n9rwUeMUrQEkK3k1602ZbZIr4UPtM/HBb7rRyZgQmXsQYuh4RzOwcgL2Pg0go\nCiqdov/a5FEisd9ICxKIKKVXZna5p8vBBeOIPxEHsASblIs/dvaJO8rtk57+\n8lGSaJJ9KFgunb1uazTLUaly/yruEc+twilKZOQbQuqEt0Rlq+fEyRs/dhtE\nfkD0bJiciNfpNiygOm3gSqJkvzY+saZi25VbgYzsxWLIlaHi+ZcYuHaaeAQo\n94N8UD4YDblTn7+SnKyuK8hxm8xyBhRlaqwvHFOxxyz8pLYSdtNcOhKJB1yu\nkn7XbSxmgVziJ3v/WhZQYv7nvI7LNFGJhQ+if6qcQS1Zlkll2e1OnMYecW1v\nZVky1BMfGaoge1vyvsxtRacefBLVhwnSz+Z8oWJ2DlwLbwV81yTqyXbllneR\ntvK9tSJcRBai0nY8tJc+30zTFkmL8kP6BtvsnQjLfdb+Y8B1npgAFaz2HMi6\ndRYg\r\n=k5dT\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQC4DhWSNw4vQvRd7u2L027fpm85KQKNpTodx9SGBGKfMgIgb4Kzjc1m2FTBCqJD8iKVpMimTPD7xlibDcBN5323ooA="}]},"maintainers":[{"name":"brucef","email":"befletch@gmail.com"}],"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/node-red-contrib-postgres-multi_0.2.0_1531455098226_0.3980548822823011"},"_hasShrinkwrap":false}},"time":{"created":"2018-03-20T14:57:01.726Z","0.1.0":"2018-03-20T14:57:01.800Z","modified":"2022-05-11T03:47:27.546Z","0.2.0":"2018-07-13T04:11:38.312Z"},"maintainers":[{"name":"brucef","email":"befletch@gmail.com"}],"description":"A Node-RED node to query PostgreSql, with multi-query support","homepage":"https://github.com/BruceFletcher/node-red-contrib-postgres-multi#readme","keywords":["node-red","postgres","postgresql"],"repository":{"type":"git","url":"git+https://github.com/BruceFletcher/node-red-contrib-postgres-multi.git"},"bugs":{"url":"https://github.com/BruceFletcher/node-red-contrib-postgres-multi/issues"},"license":"Apache-2.0","readme":"## node-red-contrib-postgres-multi\n\nA [Node-RED](http://nodered.org) node to query [PostgreSQL](http://www.postgresql.org/), with multiple query support.\n\nBased on [node-red-contrib-postgres](https://github.com/krisdaniels/node-red-contrib/tree/master/node-red-contrib-postgres) by Kris Daniels.\n\n### Compatibility\n\nThis module is designed assuming you will only use this one or Kris' original version in a project, but\nnot both at the same time. You can replace one with the other in your project and your flows will remain\nconnected.\n\n* The configuration code is identical, so your database connection configuration should need no changes.\n* The output format is identical (assuming equivalent queries)\n* The input format is significantly different, and will require updates on any block generating\n  queries to be passed to Postgres. (The queries shouldn't change, just the encapsulating data structure.)\n\n### Requirements\n\nThis module uses JavaScript features only found in Node versions 8+.\n\n### Install\n\nRun the following command in the root directory of your Node-RED install\n\n    npm install node-red-contrib-postgres-multi\n\n### Usage\n\nAssemble your queries as an array of objects on msg.payload:\n\n    msg.payload = [\n        {\n            query: 'begin',\n        },\n        {\n            query: 'delete from mytable',\n        },\n        {\n            query: 'insert into mytable (id, message) values (1, $hello), (2, $world)',\n            params: {\n                hello: 'Hi there',\n                world: 'O\\'Rorke',\n            },\n        },\n        {\n            query: 'commit',\n        },\n    ];\n\nAs you can see, this structure allows you to create your own transaction boundaries.\n\nIf you want the output of one or more queries, check the 'Receive output' box in the postgres node\nand include an `output: true` member in the query object(s) you expect results from.\nThe results are then set on the msg.payload property of the outbound message.\n\n    msg.payload = [\n        {\n            query: 'select message from mytable where id=$1',\n            params: [1],\n            output: true,\n        },\n        {\n            query: 'select message from mytable where id=$1',\n            params: [2],\n            output: true,\n        },\n    ];\n\n    # output:\n\n    [\n        ['Hi there'],\n        ['O\\'Rorke']\n    ]\n\n### Example DB\n\n    begin;\n    create table mytable\n    (\n        id integer not null,\n        message character varying(20)\n    );\n    create unique index on mytable (id);\n    commit;\n\n### Example node-red flow\n\nImport the flow below in an empty sheet in nodered\n\n    [{\"id\":\"460f2b8f.a23dbc\",\"type\":\"tab\",\"label\":\"Postgres example flows\",\"disabled\":false,\"info\":\"# Postgres example flows\\n\\nThese flows demonstrate the use of the\\n`node-red-contrib-postgres-multi` node.\\n\\n## Setup\\n\\nFor the flows in this tab,\\nyou'll need a PostgreSQL table like so:\\n\\n    begin;\\n    create table mytable\\n    (\\n        id integer not null,\\n        message character varying(20)\\n    );\\n    create unique index on mytable (id);\\n    commit;\\n\\nThen you'll need to configure the postgres\\nblocks to have access to this database and table.\\n\"},{\"id\":\"5498d534.e9cc54\",\"type\":\"comment\",\"z\":\"460f2b8f.a23dbc\",\"name\":\"Reset\",\"info\":\"This flow clears any contents from\\nthe `mytable` table and inserts a single\\nrecord:\\n\\n    id   message\\n    1    'hello world'\\n\",\"x\":90,\"y\":40,\"wires\":[]},{\"id\":\"2ef9ce55.1ee282\",\"type\":\"inject\",\"z\":\"460f2b8f.a23dbc\",\"name\":\"click me\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":120,\"y\":100,\"wires\":[[\"98595979.a97fe\"]]},{\"id\":\"98595979.a97fe\",\"type\":\"function\",\"z\":\"460f2b8f.a23dbc\",\"name\":\"prepare\",\"func\":\"\\nmsg.payload = [\\n    {\\n        query: 'begin',\\n    },\\n    {\\n        query: 'delete from mytable',\\n    },\\n    {\\n        query: 'insert into mytable (id, message) values ($1, $2)',\\n        params: [1, 'hello world'],\\n    },\\n    {\\n        query: 'select * from mytable',\\n        output: true,\\n    },\\n    {\\n        query: 'commit',\\n    },\\n];\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":300,\"y\":100,\"wires\":[[\"30d1db79.179dd4\"]]},{\"id\":\"30d1db79.179dd4\",\"type\":\"postgres\",\"z\":\"460f2b8f.a23dbc\",\"postgresdb\":\"5932c310.1c96d4\",\"name\":\"\",\"output\":true,\"outputs\":1,\"x\":480,\"y\":100,\"wires\":[[\"87793132.0d9d88\"]]},{\"id\":\"87793132.0d9d88\",\"type\":\"debug\",\"z\":\"460f2b8f.a23dbc\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":679.5,\"y\":100,\"wires\":[]},{\"id\":\"27e47fba.f5896\",\"type\":\"comment\",\"z\":\"460f2b8f.a23dbc\",\"name\":\"Demo\",\"info\":\"This flow demonstrates:\\n\\n* transactions and auto-commit queries\\n* positional arguments (i.e. $argName)\\n* query output from multiple queries\\n\",\"x\":86.5,\"y\":182,\"wires\":[]},{\"id\":\"2de05c89.ff8454\",\"type\":\"inject\",\"z\":\"460f2b8f.a23dbc\",\"name\":\"click me\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":120,\"y\":240,\"wires\":[[\"b5127483.4ae8d8\"]]},{\"id\":\"b5127483.4ae8d8\",\"type\":\"function\",\"z\":\"460f2b8f.a23dbc\",\"name\":\"prepare\",\"func\":\"\\nmsg.payload = [\\n    {\\n        query: 'begin',\\n    },\\n    {\\n        query: 'delete from mytable',\\n    },\\n    {\\n        query:\\n            'insert into mytable (id, message) ' +\\n            'values ($foo, $bar), ($baz, $boop)',\\n        params: {\\n            foo: 10,\\n            bar: 'hello',\\n            baz: 20,\\n            boop: 'world',\\n        },\\n    },\\n    {\\n        query: 'commit',\\n    },\\n    {\\n        query: 'select * from mytable',\\n        output: true,\\n    },\\n    {\\n        query: 'insert into mytable (id, message) values (30, \\\\'xtra\\\\')',\\n    },\\n    {\\n        query: 'select message from mytable order by id',\\n        output: true,\\n    },\\n];\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":300,\"y\":240,\"wires\":[[\"6308b299.b5a87c\"]]},{\"id\":\"6308b299.b5a87c\",\"type\":\"postgres\",\"z\":\"460f2b8f.a23dbc\",\"postgresdb\":\"5932c310.1c96d4\",\"name\":\"\",\"output\":true,\"outputs\":1,\"x\":480,\"y\":240,\"wires\":[[\"68797b5f.c0a3ec\"]]},{\"id\":\"68797b5f.c0a3ec\",\"type\":\"debug\",\"z\":\"460f2b8f.a23dbc\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":679.5,\"y\":240,\"wires\":[]},{\"id\":\"35f6d8a5.a36018\",\"type\":\"comment\",\"z\":\"460f2b8f.a23dbc\",\"name\":\"Rollback\",\"info\":\"If you start a transaction and don't commit it,\\nyour changes will not be saved.\",\"x\":100,\"y\":320,\"wires\":[]},{\"id\":\"ba356a1b.b7c2e8\",\"type\":\"inject\",\"z\":\"460f2b8f.a23dbc\",\"name\":\"click me\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":120,\"y\":380,\"wires\":[[\"73628965.7539d8\"]]},{\"id\":\"73628965.7539d8\",\"type\":\"function\",\"z\":\"460f2b8f.a23dbc\",\"name\":\"prepare\",\"func\":\"\\nmsg.payload = [\\n    {\\n        query: 'begin',\\n    },\\n    {\\n        query: 'delete from mytable',\\n    },\\n    {\\n        query:\\n            'insert into mytable (id, message) ' +\\n            'values ($foo, $bar), ($baz, $boop), ($bing, $bang)',\\n        params: {\\n            foo: 10,\\n            bar: 'one does not simply',\\n            baz: 20,\\n            boop: 'begin',\\n            bing: 30,\\n            bang: 'but not commit',\\n        },\\n    },\\n    {\\n        query: 'select message from mytable order by id',\\n        output: true,\\n    },\\n];\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":300,\"y\":380,\"wires\":[[\"f7c2f77b.85d6b8\"]]},{\"id\":\"f7c2f77b.85d6b8\",\"type\":\"postgres\",\"z\":\"460f2b8f.a23dbc\",\"postgresdb\":\"5932c310.1c96d4\",\"name\":\"\",\"output\":true,\"outputs\":1,\"x\":480,\"y\":380,\"wires\":[[\"77248a23.6a48b4\",\"b5a1d7d5.4301a8\"]]},{\"id\":\"77248a23.6a48b4\",\"type\":\"debug\",\"z\":\"460f2b8f.a23dbc\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":679.5,\"y\":380,\"wires\":[]},{\"id\":\"b5a1d7d5.4301a8\",\"type\":\"function\",\"z\":\"460f2b8f.a23dbc\",\"name\":\"check\",\"func\":\"\\nmsg.payload = [\\n    {\\n        query: 'select message from mytable order by id',\\n        output: true,\\n    },\\n];\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":290,\"y\":460,\"wires\":[[\"d8d8e5bc.f76488\"]]},{\"id\":\"d8d8e5bc.f76488\",\"type\":\"postgres\",\"z\":\"460f2b8f.a23dbc\",\"postgresdb\":\"5932c310.1c96d4\",\"name\":\"\",\"output\":true,\"outputs\":1,\"x\":480,\"y\":460,\"wires\":[[\"b0f96526.7a4648\"]]},{\"id\":\"b0f96526.7a4648\",\"type\":\"debug\",\"z\":\"460f2b8f.a23dbc\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":679.5,\"y\":460,\"wires\":[]},{\"id\":\"5932c310.1c96d4\",\"type\":\"postgresdb\",\"z\":\"\",\"hostname\":\"localhost\",\"port\":\"5432\",\"db\":\"foo\",\"ssl\":false}]","readmeFilename":"README.md"}